<div align="center">

<img src="assets/icon.png" alt="PrinParty ë¡œê³ " width="120" height="120" style="border-radius: 24px;" />

# PrinParty

**ëœë¤ ì˜ìƒí†µí™” ë§¤ì¹­ ì•±**

[![í”Œë«í¼](https://img.shields.io/badge/í”Œë«í¼-iOS%20%7C%20Android-lightgrey?style=flat-square)](https://expo.dev)
[![Expo](https://img.shields.io/badge/Expo-54.0-black?style=flat-square&logo=expo)](https://expo.dev)
[![React Native](https://img.shields.io/badge/React%20Native-0.81-61DAFB?style=flat-square&logo=react)](https://reactnative.dev)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9-3178C6?style=flat-square&logo=typescript)](https://www.typescriptlang.org)
[![Firebase](https://img.shields.io/badge/Firebase-12.9-FFCA28?style=flat-square&logo=firebase)](https://firebase.google.com)
[![Agora](https://img.shields.io/badge/Agora.io-SDK-099DFD?style=flat-square)](https://agora.io)

*ë²„íŠ¼ í•˜ë‚˜ë¡œ ë‚¯ì„  ì‚¬ëŒê³¼ ì‹¤ì‹œê°„ ì˜ìƒí†µí™” â€” íšŒì›ê°€ì… ì—†ì´, ë°”ë¡œ ì—°ê²°.*

</div>

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- **ì›íƒ­ ì‹œì‘** â€” Firebase ìµëª… ë¡œê·¸ì¸ìœ¼ë¡œ ë²„íŠ¼ ëˆ„ë¥´ëŠ” ìˆœê°„ ìë™ ë¡œê·¸ì¸. ê³„ì • ë¶ˆí•„ìš”.
- **ì‹¤ì‹œê°„ ë§¤ì¹­** â€” Firebase Realtime Database ëŒ€ê¸°ì—´ì— `runTransaction`(ì›ìì  ì²˜ë¦¬)ì„ ì ìš©í•´ ë™ì‹œ ì ‘ì† ìƒí™©ì—ì„œë„ ì¤‘ë³µ ë§¤ì¹­ ì—†ì´ ì•ˆì „í•˜ê²Œ ì—°ê²°.
- **HD ì˜ìƒí†µí™”** â€” Agora.io RTCë¡œ ì €ì§€ì—° ê³ í™”ì§ˆ ì–‘ë°©í–¥ ì˜ìƒÂ·ìŒì„± ì œê³µ.
- **í´ë¼ì´ì–¸íŠ¸ ì¸¡ í† í° ìƒì„±** â€” Agora AccessToken v006(HMAC-SHA256 + CRC32)ì„ ë””ë°”ì´ìŠ¤ì—ì„œ ì§ì ‘ ìƒì„± â€” ë³„ë„ í† í° ì„œë²„ ë¶ˆí•„ìš”.
- **ìµœê·¼ í†µí™” ìƒëŒ€ ì œì™¸** â€” ì§ì „ 3ëª…ì˜ ë§¤ì¹­ ìƒëŒ€ëŠ” ë‹¤ìŒ ë§¤ì¹­ í’€ì—ì„œ ì œì™¸ë˜ì–´ í•­ìƒ ìƒˆë¡œìš´ ì‚¬ëŒê³¼ ì—°ê²°.
- **ìë™ ì¬ëŒ€ê¸°** â€” í†µí™” ì¢…ë£Œ í›„ ë³„ë„ ì¡°ì‘ ì—†ì´ ìë™ìœ¼ë¡œ ëŒ€ê¸°ì—´ì— ì¬ì§„ì….
- **í™”ë©´ ì† í™”ë©´(PiP) UI** â€” ë‚´ í™”ë©´ì€ ìš°ì¸¡ í•˜ë‹¨ ë¯¸ë‹ˆ í™”ë©´ìœ¼ë¡œ ê³ ì •ë˜ê³ , ìƒëŒ€ë°© í™”ë©´ì´ ì „ì²´ í™”ë©´ì„ ì±„ì›€.
- **ì¤‘ë³µ í†µí™” ë°©ì§€** â€” `matchFoundRef`, `callEndedRef`, `cancelledRef` ë“± ë³µìˆ˜ì˜ ref ê°€ë“œë¡œ Firebase ì¤‘ë³µ ì“°ê¸°ì™€ Agora ì¤‘ë³µ ë™ì‘ì„ ì°¨ë‹¨.

---

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ì˜ì—­ | ê¸°ìˆ  | ë¹„ê³  |
|------|------|------|
| í”„ë ˆì„ì›Œí¬ | [Expo](https://expo.dev) (React Native) ~54 | Development Build í•„ìš” â€” Expo Go ë¯¸ì§€ì› |
| ì–¸ì–´ | TypeScript 5.9 | Strict ëª¨ë“œ í™œì„±í™” |
| ì˜ìƒí†µí™” | [Agora.io](https://agora.io) `react-native-agora` ^4.5 | ì›” 10,000ë¶„ ë¬´ë£Œ |
| ì¸ì¦ | Firebase ìµëª… ì¸ì¦ | ê°€ì… ì—†ì´ ì¦‰ì‹œ ë¡œê·¸ì¸ |
| ì‹¤ì‹œê°„ DB | Firebase Realtime Database | ëŒ€ê¸°ì—´ + ë§¤ì¹˜ ë¬¸ì„œ ì €ì¥ |
| ìƒíƒœ ê´€ë¦¬ | React `useState` | ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¯¸ì‚¬ìš© |
| ë„¤ë¹„ê²Œì´ì…˜ | ì»¤ìŠ¤í…€ `AppNavigator` (`useState<Screen>`) | expo-router ë¯¸ì‚¬ìš© |
| ì•„ì´ì½˜ | `@expo/vector-icons` (Ionicons) | |
| ë¹Œë“œ | EAS Build | iOS & Android í´ë¼ìš°ë“œ ë¹Œë“œ |

---

## ğŸ“± í™”ë©´ íë¦„

```
IndexScreen  â”€â”€â–¶  WaitingScreen  â”€â”€â–¶  VideoCallScreen
(ì‹œì‘ ë²„íŠ¼)       (ëŒ€ê¸°ì—´ + ë§¤ì¹­)       (ì‹¤ì‹œê°„ í†µí™”)
                       â–²                    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        í†µí™” ì¢…ë£Œ í›„ ìë™ ì¬ëŒ€ê¸°
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ì „ ì¤€ë¹„

| ë„êµ¬ | ë²„ì „ | ì„¤ì¹˜ ë°©ë²• |
|------|------|-----------|
| Node.js | â‰¥ 18 | [nodejs.org](https://nodejs.org) |
| npm | â‰¥ 9 | Node ì„¤ì¹˜ ì‹œ í¬í•¨ |
| Expo CLI | ìµœì‹  | `npm i -g expo-cli` |
| EAS CLI | ìµœì‹  | `npm i -g eas-cli` |
| Xcode | â‰¥ 15 | Mac App Store (iOS ì „ìš©) |
| Android Studio | ìµœì‹  | [developer.android.com](https://developer.android.com/studio) (Android ì „ìš©) |

### 1. ì €ì¥ì†Œ í´ë¡ 

```bash
git clone https://github.com/GDandTOP/VirtualFaceTime.git
cd VirtualFaceTime
```

### 2. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```bash
cp .env.example .env
```

`.env` íŒŒì¼ì„ ì—´ì–´ ì•„ë˜ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”:

```env
# Firebase â€” https://console.firebase.google.com
EXPO_PUBLIC_FIREBASE_API_KEY=your_api_key
EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
EXPO_PUBLIC_FIREBASE_DATABASE_URL=https://your_project-default-rtdb.firebaseio.com
EXPO_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
EXPO_PUBLIC_FIREBASE_APP_ID=your_app_id

# Agora â€” https://console.agora.io
EXPO_PUBLIC_AGORA_APP_ID=your_agora_app_id
EXPO_PUBLIC_AGORA_APP_CERTIFICATE=your_agora_certificate  # í…ŒìŠ¤íŠ¸ ëª¨ë“œì—ì„œëŠ” ìƒëµ ê°€ëŠ¥
```

> **ì°¸ê³ :** `EXPO_PUBLIC_AGORA_APP_CERTIFICATE`ëŠ” ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤. ìƒëµí•˜ë©´ í…ŒìŠ¤íŠ¸ ëª¨ë“œ(ë¹ˆ í† í°)ë¡œ ë™ì‘í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ì„¤ì •í•˜ì„¸ìš”.

### 4. Firebase ì´ˆê¸° ì„¤ì • (ìµœì´ˆ 1íšŒ)

1. [Firebase Console](https://console.firebase.google.com) â†’ í”„ë¡œì íŠ¸ ì„ íƒ â†’ **Authentication** â†’ **ìµëª…** ë¡œê·¸ì¸ í™œì„±í™”.
2. **Realtime Database** â†’ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± â†’ ì•„ë˜ ë³´ì•ˆ ê·œì¹™ ì ìš©:

```json
{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null"
  }
}
```

### 5. ì•± ì‹¤í–‰

> `react-native-agora`ëŠ” **Development Build** í•„ìš” â€” Expo Goì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```bash
# iOS ì‹œë®¬ë ˆì´í„° (macOS ì „ìš©)
npm run ios

# Android ì—ë®¬ë ˆì´í„°
npm run android

# ê°œë°œ ì„œë²„ë§Œ ì‹œì‘
npm start
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
prinparty/
â”œâ”€â”€ App.tsx                        # ì§„ì…ì  â€” AppNavigatorë¥¼ SafeAreaProviderë¡œ ê°ìŒˆ
â”œâ”€â”€ index.ts                       # Expo ì•± ë“±ë¡
â”œâ”€â”€ app.json                       # Expo ì„¤ì • (ë²ˆë“¤ ID, ê¶Œí•œ, EAS í”„ë¡œì íŠ¸ ID)
â”œâ”€â”€ eas.json                       # EAS Build í”„ë¡œíŒŒì¼ (development / preview / production)
â”œâ”€â”€ metro.config.js                # Metro ë²ˆë“¤ëŸ¬ ì„¤ì •
â”œâ”€â”€ .env.example                   # í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ assets/                        # ì•± ì•„ì´ì½˜ ë° ìŠ¤í”Œë˜ì‹œ ì´ë¯¸ì§€
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ navigation/
    â”‚   â””â”€â”€ AppNavigator.tsx        # í™”ë©´ ìƒíƒœ ë¨¸ì‹  (index â†’ waiting â†’ videoCall)
    â”‚
    â”œâ”€â”€ screens/
    â”‚   â”œâ”€â”€ IndexScreen.tsx         # í™ˆ í™”ë©´ â€” ìµëª… ë¡œê·¸ì¸ + "ë§¤ì¹­ ì‹œì‘" ë²„íŠ¼
    â”‚   â”œâ”€â”€ WaitingScreen.tsx       # ëŒ€ê¸° í™”ë©´ â€” ì• ë‹ˆë©”ì´ì…˜ ìŠ¤í”¼ë„ˆ + ì·¨ì†Œ ë²„íŠ¼
    â”‚   â””â”€â”€ VideoCallScreen.tsx     # í†µí™” í™”ë©´ â€” ì „ì²´ í™”ë©´ ì›ê²© ì˜ìƒ + PiP ë¡œì»¬ ë¯¸ë¦¬ë³´ê¸°
    â”‚
    â”œâ”€â”€ services/
    â”‚   â”œâ”€â”€ matchingService.ts      # Firebase ëŒ€ê¸°ì—´ ë¡œì§ (joinQueue, tryMatch, listenForMatch)
    â”‚   â””â”€â”€ agoraService.ts         # Agora RTC ì—”ì§„ (initAgora, joinChannel, leaveChannel, í† í°)
    â”‚
    â”œâ”€â”€ config/
    â”‚   â””â”€â”€ firebase.ts             # Firebase ì•± ì´ˆê¸°í™”
    â”‚
    â””â”€â”€ constants/
        â””â”€â”€ colors.ts               # ë””ìì¸ ì‹œìŠ¤í…œ (Colors, Typography, Spacing, Radius, Shadows)
```

---

## ğŸ”„ ë§¤ì¹­ ë™ì‘ ì›ë¦¬

ë§¤ì¹­ íŒŒì´í”„ë¼ì¸ì€ **ì›ìì ì´ê³  ê²½ìŸ ì¡°ê±´ ì—†ì´** ë™ì‘í•©ë‹ˆë‹¤:

```
ì‚¬ìš©ì Aê°€ "ì‹œì‘" ë²„íŠ¼ ëˆ„ë¦„    ì‚¬ìš©ì Bê°€ "ì‹œì‘" ë²„íŠ¼ ëˆ„ë¦„
          â”‚                              â”‚
   signInAnonymously()           signInAnonymously()
          â”‚                              â”‚
   joinQueue(uidA)                joinQueue(uidB)
   /queue/{uidA} ê¸°ë¡             /queue/{uidB} ê¸°ë¡
          â”‚                              â”‚
   tryMatch(uidA) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tryMatch(uidB)
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ runTransaction â”€â”€â”€â”€â”˜
                            â”‚
                  í•œ íŠ¸ëœì­ì…˜ë§Œ ì„±ê³µ:
                  /queue ì •ë¦¬ë¨
                  /matches/{id} ìƒì„±ë¨
                            â”‚
               ì–‘ìª½ í´ë¼ì´ì–¸íŠ¸ì— listenForMatch ë°œí™”
                            â”‚
                   í™”ë©´ â†’ 'videoCall'
```

`/queue` ì „ì²´ ë…¸ë“œì— ëŒ€í•œ `runTransaction`ì€ ëª‡ ëª…ì´ ë™ì‹œì— `tryMatch`ë¥¼ í˜¸ì¶œí•´ë„ **ë‹¨ í•˜ë‚˜ì˜** ë§¤ì¹˜ ë¬¸ì„œë§Œ ìƒì„±ë¨ì„ ë³´ì¥í•©ë‹ˆë‹¤.

---

## ğŸ—„ï¸ Firebase ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```
Firebase Realtime Database
â”œâ”€â”€ /queue/{uid}
â”‚     â”œâ”€â”€ uid: string             # Firebase ìµëª… ì‚¬ìš©ì ID
â”‚     â”œâ”€â”€ joinedAt: number        # Unix íƒ€ì„ìŠ¤íƒ¬í”„ (ms) â€” FIFO ìˆœì„œ ê²°ì •
â”‚     â””â”€â”€ recentContacts: string[] # ìµœê·¼ ë§¤ì¹­ëœ UID 3ê°œ (ë§¤ì¹­ ì œì™¸ ëŒ€ìƒ)
â”‚
â””â”€â”€ /matches/{matchId}
      â”œâ”€â”€ user1: string           # ì²« ë²ˆì§¸ ë§¤ì¹­ ì‚¬ìš©ì UID
      â”œâ”€â”€ user2: string           # ë‘ ë²ˆì§¸ ë§¤ì¹­ ì‚¬ìš©ì UID
      â”œâ”€â”€ channelName: string     # "channel_{matchId}" â€” Agora ì±„ë„ëª…
      â””â”€â”€ createdAt: number       # Unix íƒ€ì„ìŠ¤íƒ¬í”„ (ms)
```

---

## ğŸ”§ í™˜ê²½ë³€ìˆ˜ ëª©ë¡

| ë³€ìˆ˜ëª… | í•„ìˆ˜ ì—¬ë¶€ | ì„¤ëª… |
|--------|-----------|------|
| `EXPO_PUBLIC_FIREBASE_API_KEY` | âœ… | Firebase í”„ë¡œì íŠ¸ API í‚¤ |
| `EXPO_PUBLIC_FIREBASE_AUTH_DOMAIN` | âœ… | Firebase Auth ë„ë©”ì¸ |
| `EXPO_PUBLIC_FIREBASE_DATABASE_URL` | âœ… | Realtime Database URL |
| `EXPO_PUBLIC_FIREBASE_PROJECT_ID` | âœ… | Firebase í”„ë¡œì íŠ¸ ID |
| `EXPO_PUBLIC_FIREBASE_STORAGE_BUCKET` | âœ… | Firebase Storage ë²„í‚· |
| `EXPO_PUBLIC_FIREBASE_MESSAGING_SENDER_ID` | âœ… | FCM ë°œì‹ ì ID |
| `EXPO_PUBLIC_FIREBASE_APP_ID` | âœ… | Firebase ì•± ID |
| `EXPO_PUBLIC_AGORA_APP_ID` | âœ… | Agora í”„ë¡œì íŠ¸ App ID |
| `EXPO_PUBLIC_AGORA_APP_CERTIFICATE` | â¬œ | Agora App Certificate (í”„ë¡œë•ì…˜ í† í° ì„œëª…ìš©) |

> ëª¨ë“  ë³€ìˆ˜ëŠ” React Native ë²ˆë“¤ì—ì„œ ëŸ°íƒ€ì„ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë°˜ë“œì‹œ `EXPO_PUBLIC_` ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì•¼ í•©ë‹ˆë‹¤.

---

## ğŸ—ï¸ í”„ë¡œë•ì…˜ ë¹Œë“œ

PrinPartyëŠ” í´ë¼ìš°ë“œ ë¹Œë“œë¥¼ ìœ„í•´ [EAS Build](https://docs.expo.dev/build/introduction/)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
# EAS CLI ì„¤ì¹˜
npm install -g eas-cli

# Expo ê³„ì • ë¡œê·¸ì¸
eas login

# iOS ë¹Œë“œ (TestFlight / App Store)
eas build --platform ios --profile production

# Android ë¹Œë“œ (Play Store)
eas build --platform android --profile production

# ë‚´ë¶€ ë°°í¬ ë¹Œë“œ (QR ì½”ë“œë¡œ ì„¤ì¹˜)
eas build --platform all --profile preview
```

---

## ğŸ›¡ï¸ ì¤‘ë³µ í†µí™” ë°©ì§€ ì¥ì¹˜

| ìœ„ì¹˜ | ë°©ì§€ ëŒ€ìƒ | ë©”ì»¤ë‹ˆì¦˜ |
|------|-----------|----------|
| `matchingService.ts` | ë™ì‹œ ì¤‘ë³µ ë§¤ì¹­ | `runTransaction` ì›ìì  ì—…ë°ì´íŠ¸ |
| `WaitingScreen.tsx` | ë§¤ì¹­ ì½œë°± ì¤‘ë³µ ì‹¤í–‰ | `matchFoundRef` boolean ê°€ë“œ |
| `WaitingScreen.tsx` | ë§¤ì¹­ í›„ `leaveQueue` í˜¸ì¶œ | `cancelledRef` boolean ê°€ë“œ |
| `VideoCallScreen.tsx` | ë²„íŠ¼ê³¼ `onUserOffline` ë™ì‹œ ì¢…ë£Œ | `callEndedRef` boolean ê°€ë“œ |
| `agoraService.ts` | Agora ì—”ì§„ ì¤‘ë³µ ì´ˆê¸°í™” | `if (!engine)` ë©±ë“± íŒ¨í„´ |

---

## ğŸ“‹ ê°œë°œ ëª…ë ¹ì–´

```bash
# Expo ê°œë°œ ì„œë²„ ì‹œì‘
npm start

# í„°ë„ ëª¨ë“œë¡œ ì‹œì‘ (ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì˜ ì‹¤ê¸°ê¸° ì—°ê²° ì‹œ)
npm run start:tunnel

# iOS ì‹œë®¬ë ˆì´í„° ì‹¤í–‰
npm run ios

# Android ì—ë®¬ë ˆì´í„° ì‹¤í–‰
npm run android

# íƒ€ì… ê²€ì‚¬ (@expo/cli ì‹¬ë³¼ë¦­ ë§í¬ ë¬¸ì œ ìš°íšŒ)
node node_modules/typescript/lib/tsc.js --noEmit
```

---

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

ì•±ì€ ì°¨ë¶„í•˜ê³  ì¹œê·¼í•œ UXë¥¼ ìœ„í•´ ë¯¼íŠ¸ ê·¸ë¦° í…Œë§ˆë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

| í† í° | ê°’ | ì‚¬ìš©ì²˜ |
|------|----|--------|
| `primary` | `#4ECDC4` | ë²„íŠ¼, ë¡œë”, í™œì„± ìƒíƒœ |
| `primaryLight` | `#E8F8F5` | ë°°ê²½, ìŠ¤í”Œë˜ì‹œ í™”ë©´ |
| `primaryDark` | `#2DB5AB` | ë²„íŠ¼ ëˆŒë¦¼ ìƒíƒœ |
| `danger` | `#FF4757` | í†µí™” ì¢…ë£Œ ë²„íŠ¼ |
| `darkBg` | `#0F0F1A` | ì˜ìƒí†µí™” í™”ë©´ ë°°ê²½ |

ì „ì²´ ë””ìì¸ í† í°(Typography, Spacing, Radius, Shadows)ì€ `src/constants/colors.ts`ì— ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ë¹„ê³µê°œ í”„ë¡œì íŠ¸ë¡œ, ê³µê°œ ë°°í¬ë¥¼ ìœ„í•œ ë¼ì´ì„ ìŠ¤ë¥¼ ë¶€ì—¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

<div align="center">
  Expo Â· Firebase Â· Agora.io ë¡œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤
</div>
